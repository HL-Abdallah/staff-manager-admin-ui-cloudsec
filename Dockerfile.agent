FROM jenkins/agent:latest

# Install stuff needed for 
RUN sudo apt-get update && \
    sudo apt-get install -y docker awscli default-jdk

RUN sudo apt-get install -y \
    software-properties-common \
    npm
RUN sudo npm install npm@latest -g && \
    sudo npm install n -g && \
    sudo n latest

# # Add the commands to fix npm permissions
RUN sudo mkdir -p /.npm
# RUN chown -R 1002:1002 /.npm
# # fix docker permissions
# RUN usermod -aG docker 1002

# USER 1002:1002

